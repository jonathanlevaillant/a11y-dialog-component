{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/a11y-dialog-component.js"],"names":["f","exports","module","define","amd","window","global","self","this","Dialogs","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","CLASS_NAMES","KEY_CODES","FOCUSABLE_ELEMENTS","Dialog","activeDialog","pageClassName","inertLayersClassName","disabledPageClassName","options","_classCallCheck","trigger","dialog","document","getElementById","dismissTriggers","querySelectorAll","focusableElements","_focusableElements","_slicedToArray","firstFocusableElement","lastFocusableElement","_document$getElements","getElementsByClassName","_document$getElements2","page","inertLayers","isNested","isOpen","open","bind","close","onClick","onKeydown","_createClass","key","value","event","shiftKey","target","preventDefault","focus","_this","setTimeout","removeAttribute","classList","add","Array","prototype","forEach","inertLayer","setAttribute","setFocus","addEventListeners","remove","removeEventListeners","_this2","addEventListener","dismissTrigger","_this3","removeEventListener","which","hasAttribute","focusTrap","_this4","config","arguments","undefined","Object","assign","render","selectors","triggers","dataset","nested"],"mappings":"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","file":"a11y-dialog-component.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* dialogs\n ========================================================================== */\n\nconst Dialogs = (() => {\n  const CLASS_NAMES = {\n    pageClassName: 'js-page',\n    inertLayersClassName: 'js-inert-layer',\n    disabledPageClassName: 'is-inactive',\n  };\n\n  const KEY_CODES = {\n    tab: 9,\n    enter: 13,\n    escape: 27,\n  };\n\n  const FOCUSABLE_ELEMENTS = [\n    '[href]',\n    'input:not([disabled]):not([type=\"hidden\"])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    'button:not([disabled])',\n    'iframe',\n    'object',\n    'embed',\n    '[contenteditable]',\n    '[tabindex]:not([tabindex^=\"-\"])',\n  ];\n\n  class Dialog {\n    constructor(options) {\n      this.trigger = options.trigger;\n      this.dialog = document.getElementById(options.dialog);\n      this.dismissTriggers = this.dialog.querySelectorAll('[data-dismiss]');\n\n      this.focusableElements = this.dialog.querySelectorAll(FOCUSABLE_ELEMENTS);\n      [this.firstFocusableElement] = this.focusableElements;\n      this.lastFocusableElement = this.focusableElements[this.focusableElements.length - 1];\n\n      [this.page] = document.getElementsByClassName(options.pageClassName);\n      this.inertLayers = document.getElementsByClassName(options.inertLayersClassName);\n      this.disabledPageClassName = options.disabledPageClassName;\n\n      this.isNested = options.isNested;\n      this.isOpen = options.isOpen;\n\n      this.open = this.open.bind(this);\n      this.close = this.close.bind(this);\n      this.onClick = this.onClick.bind(this);\n      this.onKeydown = this.onKeydown.bind(this);\n\n      if (this.isOpen) {\n        this.open();\n      }\n    }\n\n    focusTrap(event) {\n      if (event.shiftKey && event.target === this.firstFocusableElement) {\n        event.preventDefault();\n        this.lastFocusableElement.focus();\n      }\n\n      if (!event.shiftKey && event.target === this.lastFocusableElement) {\n        event.preventDefault();\n        this.firstFocusableElement.focus();\n      }\n    }\n\n    setFocus() {\n      if (this.focusableElements.length > 0) {\n        window.setTimeout(() => {\n          this.firstFocusableElement.focus();\n        }, 100);\n      }\n    }\n\n    open(event) {\n      if (event) event.preventDefault();\n\n      this.dialog.removeAttribute('aria-hidden');\n\n      if (!this.isNested) {\n        this.page.classList.add(this.disabledPageClassName);\n\n        Array.prototype.forEach.call(this.inertLayers, (inertLayer) => {\n          inertLayer.setAttribute('aria-hidden', true);\n          inertLayer.setAttribute('inert', '');\n        });\n      }\n\n      // setting focus on the first focusable element\n      this.setFocus();\n\n      // add event listeners\n      this.addEventListeners();\n    }\n\n    close(event) {\n      if (event) event.preventDefault();\n\n      this.dialog.setAttribute('aria-hidden', true);\n\n      if (!this.isNested) {\n        this.page.classList.remove(this.disabledPageClassName);\n\n        Array.prototype.forEach.call(this.inertLayers, (inertLayer) => {\n          inertLayer.removeAttribute('aria-hidden');\n          inertLayer.removeAttribute('inert');\n        });\n      }\n\n      // restoring focus\n      if (this.trigger) {\n        this.trigger.focus();\n      }\n\n      // remove event listeners\n      this.removeEventListeners();\n    }\n\n    addEventListeners() {\n      this.dialog.addEventListener('click', this.onClick);\n      this.dialog.addEventListener('touchstart', this.onClick);\n      this.dialog.addEventListener('keydown', this.onKeydown);\n      this.dismissTriggers.forEach((dismissTrigger) => {\n        dismissTrigger.addEventListener('click', this.close);\n      });\n    }\n\n    removeEventListeners() {\n      this.dialog.removeEventListener('click', this.onClick);\n      this.dialog.removeEventListener('touchstart', this.onClick);\n      this.dialog.removeEventListener('keydown', this.onKeydown);\n      this.dismissTriggers.forEach((dismissTrigger) => {\n        dismissTrigger.removeEventListener('click', this.close);\n      });\n    }\n\n    onClick(event) {\n      if (event.target === this.dialog) this.close(event);\n    }\n\n    onKeydown(event) {\n      if (event.which === KEY_CODES.escape) this.close(event);\n      if (event.which === KEY_CODES.enter && event.target.hasAttribute('data-dismiss')) this.close(event);\n      if (event.which === KEY_CODES.tab) this.focusTrap(event);\n    }\n\n    render() {\n      if (this.trigger) {\n        this.trigger.addEventListener('click', this.open);\n        this.trigger.addEventListener('keydown', (event) => {\n          if (event.which === KEY_CODES.enter) {\n            this.open(event);\n          }\n        });\n      }\n    }\n  }\n\n  let activeDialog = null;\n\n  const open = (dialog, config = CLASS_NAMES) => {\n    const options = Object.assign({}, CLASS_NAMES, config);\n    options.dialog = dialog;\n    options.trigger = config.trigger ? document.getElementById(config.trigger) : false;\n\n    options.isNested = config.isNested || false;\n    options.isOpen = true;\n\n    activeDialog = new Dialog(options);\n    activeDialog.render();\n  };\n\n  const close = () => {\n    activeDialog.close();\n  };\n\n  const render = (selectors = '[data-component=\"dialog\"]', config = CLASS_NAMES) => {\n    const triggers = document.querySelectorAll(selectors);\n    const options = Object.assign({}, CLASS_NAMES, config);\n\n    triggers.forEach((trigger) => {\n      options.trigger = trigger;\n      options.dialog = trigger.dataset.target;\n\n      options.isNested = trigger.dataset.nested === 'true';\n      options.isOpen = trigger.dataset.open === 'true';\n\n      const dialog = new Dialog(options);\n      dialog.render();\n    });\n  };\n\n  return { open, close, render };\n})();\n\nexport default Dialogs;\n"]}