{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/a11y-dialog-component.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","CLASS_NAMES","KEY_CODES","FOCUSABLE_ELEMENTS","Dialog","activeDialog","Dialogs","pageClassName","inertLayersClassName","disabledPageClassName","options","_classCallCheck","this","trigger","dialog","document","getElementById","dismissTriggers","querySelectorAll","focusableElements","_focusableElements","_slicedToArray","firstFocusableElement","lastFocusableElement","_document$getElements","getElementsByClassName","_document$getElements2","page","inertLayers","isNested","isOpen","open","bind","close","onClick","onKeydown","_createClass","key","value","event","shiftKey","target","preventDefault","focus","_this","window","setTimeout","removeAttribute","classList","add","Array","prototype","forEach","inertLayer","setAttribute","setFocus","addEventListeners","remove","removeEventListeners","_this2","addEventListener","dismissTrigger","_this3","removeEventListener","which","hasAttribute","focusTrap","_this4","config","arguments","undefined","Object","assign","render","selectors","triggers","dataset","nested"],"mappings":"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","file":"a11y-dialog-component.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* dialogs\n ========================================================================== */\n\nconst Dialogs = (() => {\n  const CLASS_NAMES = {\n    pageClassName: 'js-page',\n    inertLayersClassName: 'js-inert-layer',\n    disabledPageClassName: 'is-inactive',\n  };\n\n  const KEY_CODES = {\n    tab: 9,\n    enter: 13,\n    escape: 27,\n  };\n\n  const FOCUSABLE_ELEMENTS = [\n    '[href]',\n    'input:not([disabled]):not([type=\"hidden\"])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    'button:not([disabled])',\n    'iframe',\n    'object',\n    'embed',\n    '[contenteditable]',\n    '[tabindex]:not([tabindex^=\"-\"])',\n  ];\n\n  class Dialog {\n    constructor(options) {\n      this.trigger = options.trigger;\n      this.dialog = document.getElementById(options.dialog);\n      this.dismissTriggers = this.dialog.querySelectorAll('[data-dismiss]');\n\n      this.focusableElements = this.dialog.querySelectorAll(FOCUSABLE_ELEMENTS);\n      [this.firstFocusableElement] = this.focusableElements;\n      this.lastFocusableElement = this.focusableElements[this.focusableElements.length - 1];\n\n      [this.page] = document.getElementsByClassName(options.pageClassName);\n      this.inertLayers = document.getElementsByClassName(options.inertLayersClassName);\n      this.disabledPageClassName = options.disabledPageClassName;\n\n      this.isNested = options.isNested;\n      this.isOpen = options.isOpen;\n\n      this.open = this.open.bind(this);\n      this.close = this.close.bind(this);\n      this.onClick = this.onClick.bind(this);\n      this.onKeydown = this.onKeydown.bind(this);\n\n      if (this.isOpen) {\n        this.open();\n      }\n    }\n\n    focusTrap(event) {\n      if (event.shiftKey && event.target === this.firstFocusableElement) {\n        event.preventDefault();\n        this.lastFocusableElement.focus();\n      }\n\n      if (!event.shiftKey && event.target === this.lastFocusableElement) {\n        event.preventDefault();\n        this.firstFocusableElement.focus();\n      }\n    }\n\n    setFocus() {\n      if (this.focusableElements.length > 0) {\n        window.setTimeout(() => {\n          this.firstFocusableElement.focus();\n        }, 100);\n      }\n    }\n\n    open(event) {\n      if (event) event.preventDefault();\n\n      this.dialog.removeAttribute('aria-hidden');\n\n      if (!this.isNested) {\n        this.page.classList.add(this.disabledPageClassName);\n\n        Array.prototype.forEach.call(this.inertLayers, (inertLayer) => {\n          inertLayer.setAttribute('aria-hidden', true);\n          inertLayer.setAttribute('inert', '');\n        });\n      }\n\n      // setting focus on the first focusable element\n      this.setFocus();\n\n      // add event listeners\n      this.addEventListeners();\n    }\n\n    close(event) {\n      if (event) event.preventDefault();\n\n      this.dialog.setAttribute('aria-hidden', true);\n\n      if (!this.isNested) {\n        this.page.classList.remove(this.disabledPageClassName);\n\n        Array.prototype.forEach.call(this.inertLayers, (inertLayer) => {\n          inertLayer.removeAttribute('aria-hidden');\n          inertLayer.removeAttribute('inert');\n        });\n      }\n\n      // restoring focus\n      if (this.trigger) {\n        this.trigger.focus();\n      }\n\n      // remove event listeners\n      this.removeEventListeners();\n    }\n\n    addEventListeners() {\n      this.dialog.addEventListener('click', this.onClick);\n      this.dialog.addEventListener('touchstart', this.onClick);\n      this.dialog.addEventListener('keydown', this.onKeydown);\n      this.dismissTriggers.forEach((dismissTrigger) => {\n        dismissTrigger.addEventListener('click', this.close);\n      });\n    }\n\n    removeEventListeners() {\n      this.dialog.removeEventListener('click', this.onClick);\n      this.dialog.removeEventListener('touchstart', this.onClick);\n      this.dialog.removeEventListener('keydown', this.onKeydown);\n      this.dismissTriggers.forEach((dismissTrigger) => {\n        dismissTrigger.removeEventListener('click', this.close);\n      });\n    }\n\n    onClick(event) {\n      if (event.target === this.dialog) this.close(event);\n    }\n\n    onKeydown(event) {\n      if (event.which === KEY_CODES.escape) this.close(event);\n      if (event.which === KEY_CODES.enter && event.target.hasAttribute('data-dismiss')) this.close(event);\n      if (event.which === KEY_CODES.tab) this.focusTrap(event);\n    }\n\n    render() {\n      if (this.trigger) {\n        this.trigger.addEventListener('click', this.open);\n        this.trigger.addEventListener('keydown', (event) => {\n          if (event.which === KEY_CODES.enter) {\n            this.open(event);\n          }\n        });\n      }\n    }\n  }\n\n  let activeDialog = null;\n\n  const open = (dialog, config = CLASS_NAMES) => {\n    const options = Object.assign({}, CLASS_NAMES, config);\n    options.dialog = dialog;\n    options.trigger = config.trigger ? document.getElementById(config.trigger) : false;\n\n    options.isNested = config.isNested || false;\n    options.isOpen = true;\n\n    activeDialog = new Dialog(options);\n    activeDialog.render();\n  };\n\n  const close = () => {\n    activeDialog.close();\n  };\n\n  const render = (selectors = '[data-component=\"dialog\"]', config = CLASS_NAMES) => {\n    const triggers = document.querySelectorAll(selectors);\n    const options = Object.assign({}, CLASS_NAMES, config);\n\n    triggers.forEach((trigger) => {\n      options.trigger = trigger;\n      options.dialog = trigger.dataset.target;\n\n      options.isNested = trigger.dataset.nested === 'true';\n      options.isOpen = trigger.dataset.open === 'true';\n\n      const dialog = new Dialog(options);\n      dialog.render();\n    });\n  };\n\n  return { open, close, render };\n})();\n\nexport default Dialogs;\n"]}