!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Dialogs=e()}}(function(){return function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return s(i||e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var r,o,a,l,d,u,c,h=(r={pageClassName:"js-page",inertLayersClassName:"js-inert-layer",disabledPageClassName:"is-inactive"},o=9,a=13,l=27,d=["[href]",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trigger=t.trigger,this.dialog=document.getElementById(t.dialog),this.dismissTriggers=this.dialog.querySelectorAll("[data-dismiss]"),this.focusableElements=this.dialog.querySelectorAll(d);var i=n(this.focusableElements,1);this.firstFocusableElement=i[0],this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1];var s=document.getElementsByClassName(t.pageClassName),r=n(s,1);this.page=r[0],this.inertLayers=document.getElementsByClassName(t.inertLayersClassName),this.disabledPageClassName=t.disabledPageClassName,this.isNested=t.isNested,this.isOpen=t.isOpen,this.open=this.open.bind(this),this.close=this.close.bind(this),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this),this.isOpen&&this.open()}return s(e,[{key:"focusTrap",value:function(e){e.shiftKey&&e.target===this.firstFocusableElement&&(e.preventDefault(),this.lastFocusableElement.focus()),e.shiftKey||e.target!==this.lastFocusableElement||(e.preventDefault(),this.firstFocusableElement.focus())}},{key:"setFocus",value:function(){var e=this;this.focusableElements.length>0&&window.setTimeout(function(){e.firstFocusableElement.focus()},100)}},{key:"open",value:function(e){e&&e.preventDefault(),this.dialog.removeAttribute("aria-hidden"),this.isNested||(this.page.classList.add(this.disabledPageClassName),Array.prototype.forEach.call(this.inertLayers,function(e){e.setAttribute("aria-hidden",!0),e.setAttribute("inert","")})),this.setFocus(),this.addEventListeners()}},{key:"close",value:function(e){e&&e.preventDefault(),this.dialog.setAttribute("aria-hidden",!0),this.isNested||(this.page.classList.remove(this.disabledPageClassName),Array.prototype.forEach.call(this.inertLayers,function(e){e.removeAttribute("aria-hidden"),e.removeAttribute("inert")})),this.trigger&&this.trigger.focus(),this.removeEventListeners()}},{key:"addEventListeners",value:function(){var e=this;this.dialog.addEventListener("click",this.onClick),this.dialog.addEventListener("touchstart",this.onClick),this.dialog.addEventListener("keydown",this.onKeydown),this.dismissTriggers.forEach(function(t){t.addEventListener("click",e.close)})}},{key:"removeEventListeners",value:function(){var e=this;this.dialog.removeEventListener("click",this.onClick),this.dialog.removeEventListener("touchstart",this.onClick),this.dialog.removeEventListener("keydown",this.onKeydown),this.dismissTriggers.forEach(function(t){t.removeEventListener("click",e.close)})}},{key:"onClick",value:function(e){e.target===this.dialog&&this.close(e)}},{key:"onKeydown",value:function(e){e.which===l&&this.close(e),e.which===a&&e.target.hasAttribute("data-dismiss")&&this.close(e),e.which===o&&this.focusTrap(e)}},{key:"render",value:function(){var e=this;this.trigger&&(this.trigger.addEventListener("click",this.open),this.trigger.addEventListener("keydown",function(t){t.which===a&&e.open(t)}))}}]),e}(),c=null,{open:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=Object.assign({},r,t);i.dialog=e,i.trigger=!!t.trigger&&document.getElementById(t.trigger),i.isNested=t.isNested||!1,i.isOpen=!0,(c=new u(i)).render()},close:function(){c.close()},render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-component="dialog"]',t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,i=document.querySelectorAll(e),n=Object.assign({},r,t);i.forEach(function(e){n.trigger=e,n.dialog=e.dataset.target,n.isNested="true"===e.dataset.nested,n.isOpen="true"===e.dataset.open,new u(n).render()})}});i.default=h},{}]},{},[1])(1)});
//# sourceMappingURL=a11y-dialog-component.min.js.map
